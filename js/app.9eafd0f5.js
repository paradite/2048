(function(e){function r(r){for(var n,i,s=r[0],c=r[1],u=r[2],f=0,w=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&w.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(r);while(w.length)w.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,r=0;r<a.length;r++){for(var t=a[r],n=!0,s=1;s<t.length;s++){var c=t[s];0!==o[c]&&(n=!1)}n&&(a.splice(r--,1),e=i(i.s=t[0]))}return e}var n={},o={app:0},a=[];function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)i.d(t,n,function(r){return e[r]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/vue2048/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=r,s=s.slice();for(var u=0;u<s.length;u++)r(s[u]);var l=c;a.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"0134":function(e,r,t){"use strict";var n=t("2976"),o=t.n(n);o.a},"034f":function(e,r,t){"use strict";var n=t("85ec"),o=t.n(n);o.a},2023:function(e,r,t){"use strict";var n=t("cb40"),o=t.n(n);o.a},2976:function(e,r,t){},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[e._m(0),t("GameBoard",{attrs:{game:e.game}}),t("div",{staticClass:"info"},[e._v("Move count: "+e._s(e.game.moveCount))]),t("div",{staticClass:"scores"},[e._v(" Scores"),0===e.game.scores.length?t("span",[e._v(" (empty)")]):e._e(),e._l(e.game.scores,(function(r,n){return t("div",{key:n},[e._v(" "+e._s(r)+" ")])}))],2)],1)},a=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"header"},[e._v(" 2048 Game by "),t("a",{attrs:{href:"https://github.com/paradite/vue2048"}},[e._v("@paradite")])])}],i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"board",style:{width:e.totalSize+"px",height:e.totalSize+"px",padding:e.marginSize+"px"}},e._l(e.game.rows,(function(r,n){return t("Row",{key:n,attrs:{row:r,cellSize:e.cellSize,marginSize:e.marginSize,totalSize:e.totalSize,last:n===e.game.rows.length-1}})})),1)},s=[],c=(t("99af"),t("3835")),u=t("d4ec"),l=t("ade3"),f=t("cd3f"),w=t.n(f),h=(t("b64b"),function(e){console.log("----");for(var r=0;r<e.length;r++){for(var t="",n=e[r],o=0;o<n.length;o++)n[o]?t+=n[o]+" ":t+=". ";console.log(t)}}),v={ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown"},d=2048,g=function e(){var r=this;Object(u["a"])(this,e),Object(l["a"])(this,"resetRows",(function(){for(var e=0;e<r.rows.length;e++)r.rows[e]=new Array(4)})),Object(l["a"])(this,"restart",(function(){r.moveCount=0,r.resetRows()})),Object(l["a"])(this,"isValidKey",(function(e){return e===v.ArrowUp||e===v.ArrowDown||e===v.ArrowLeft||e===v.ArrowRight})),Object(l["a"])(this,"checkWin",(function(){r.runForEachCell((function(e,t,n){n===d&&(r.scores.push(r.moveCount),r.restart())}))})),Object(l["a"])(this,"checkLose",(function(){var e=r.rows.length*r.rows[0].length,t=0;r.runForEachCell((function(e,r,n){n&&t++})),e===t&&(r.scores.push(0),r.restart())})),Object(l["a"])(this,"runForEachCell",(function(e){for(var t=0;t<r.rows.length;t++)for(var n=r.rows[t],o=0;o<n.length;o++){var a=n[o];e(t,o,a)}})),Object(l["a"])(this,"addRandomNumbers",(function(){for(var e=0;e<2;e++){var t=r.getRandomPosition(),n=r.getRandomPosition(),o=3;while(r.rows[t][n]&&o)t=r.getRandomPosition(),n=r.getRandomPosition(),o--;if(r.rows[t][n])return;var a=r.getRandomNumber();r.rows[t][n]=a}})),Object(l["a"])(this,"getRandomPosition",(function(){var e=Math.random();return e<.25?0:e<.5?1:e<.75?2:3})),Object(l["a"])(this,"getRandomNumber",(function(){return 2})),Object(l["a"])(this,"getMoveDestination",(function(e,t,n,o,a){switch(o){case v.ArrowUp:if(0===e)return[e,t];for(var i=e-1;i>=0;i--)if(a["".concat(i,"-").concat(t)]){if(r.rows[i][t])return[i+1,t]}else if(r.rows[i][t])return r.rows[i][t]!==n?[i+1,t]:[i,t];return[e,t];case v.ArrowDown:if(e===r.rows.length-1)return[e,t];for(var s=e+1;s<=r.rows.length-1;s++)if(a["".concat(s,"-").concat(t)]){if(r.rows[s][t])return[s-1,t]}else if(r.rows[s][t])return r.rows[s][t]!==n?[s-1,t]:[s,t];return[e,t];case v.ArrowLeft:if(0===t)return[e,t];for(var c=t-1;c>=0;c--)if(a["".concat(e,"-").concat(c)]){if(r.rows[e][c])return[e,c+1]}else if(r.rows[e][c])return r.rows[e][c]!==n?[e,c+1]:[e,c];return[e,t];case v.ArrowRight:if(t===r.rows[0].length-1)return[e,t];for(var u=t+1;u<=r.rows[0].length-1;u++)if(a["".concat(e,"-").concat(u)]){if(r.rows[e][u])return[e,u-1]}else if(r.rows[e][u])return r.rows[e][u]!==n?[e,u-1]:[e,u];return[e,t];default:break}})),Object(l["a"])(this,"handleEvent",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r.isValidKey(e)){n&&r.moveCount++;for(var o=!1,a=0;a<r.rows.length;a++)for(var i=r.rows[a],s=0;s<i.length;s++)if(!t["".concat(a,"-").concat(s)]){var u=i[s];if(u){var l=r.getMoveDestination(a,s,u,e,t);if(l){var f=Object(c["a"])(l,2),v=f[0],d=f[1];if(v===a&&d===s)continue;t["".concat(v,"-").concat(d)]=!0,o=!0,i[s]=void 0,r.rows[v][d]?(u!==r.rows[v][d]&&console.error("element ".concat(u," from ").concat(a,",").concat(s," moved to ").concat(v,",").concat(d," with ").concat(r.rows[v][d])),r.rows[v][d]=u+r.rows[v][d]):r.rows[v][d]=u}}}o?r.handleEvent(e,t,!1):(r.squeeze(e),r.rows=w()(r.rows),r.checkWin(),r.checkLose(),r.addRandomNumbers(),h(r.rows),r.rows=w()(r.rows))}})),Object(l["a"])(this,"squeeze",(function(e){for(var t=!1,n=0;n<r.rows.length;n++)for(var o=r.rows[n],a=0;a<o.length;a++){var i=o[a];if(i){var s=r.getSqueezeDestination(n,a,e);if(s){var u=Object(c["a"])(s,2),l=u[0],f=u[1];if(l===n&&f===a)continue;t=!0,o[a]=void 0,r.rows[l][f]?(console.error("something wrong r c",l,f),console.error("this.rows[r][c]",r.rows[l][f])):r.rows[l][f]=i}}}t&&(r.rows=w()(r.rows),r.squeeze(e))})),Object(l["a"])(this,"getSqueezeDestination",(function(e,t,n){switch(n){case v.ArrowUp:if(0===e)return[e,t];for(var o=e-1;o>=0;o--)if(r.rows[o][t])return[o+1,t];return[0,t];case v.ArrowDown:if(e===r.rows.length-1)return[e,t];for(var a=e+1;a<=r.rows.length-1;a++)if(r.rows[a][t])return[a-1,t];return[r.rows.length-1,t];case v.ArrowLeft:if(0===t)return[e,t];for(var i=t-1;i>=0;i--)if(r.rows[e][i])return[e,i+1];return[e,0];case v.ArrowRight:if(t===r.rows[0].length-1)return[e,t];for(var s=t+1;s<=r.rows[0].length-1;s++)if(r.rows[e][s])return[e,s-1];return[e,r.rows[0].length-1];default:break}})),this.rows=new Array(4),this.resetRows(),this.addRandomNumbers(),this.moved={},this.moveCount=0,this.scores=[]},p=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"row",style:{width:e.totalSize+"px",height:e.cellSize+"px",marginBottom:e.last?0:e.marginSize+"px"}},e._l(e.row,(function(r,n){var o;return t("div",{key:n,staticClass:"cell",class:(o={},o["cell-"+r]=!0,o),style:{width:e.cellSize+"px",height:e.cellSize+"px",marginRight:n===e.row.length-1?0:e.marginSize+"px"}},[e._v(" "+e._s(r)+" ")])})),0)},m=[],b=(t("a9e3"),{name:"Row",props:{row:Array,cellSize:Number,marginSize:Number,totalSize:Number,last:Boolean}}),y=b,S=(t("2023"),t("2877")),O=Object(S["a"])(y,p,m,!1,null,"952ee07a",null),A=O.exports,_={name:"GameBoard",components:{Row:A},data:function(){var e=70,r=10;return{cellSize:e,marginSize:r}},computed:{totalSize:function(){return 4*this.cellSize+3*this.marginSize}},props:{game:g,rows:Array}},j=_,z=(t("0134"),Object(S["a"])(j,i,s,!1,null,"2840321e",null)),R=z.exports,x=new g,E={name:"App",components:{GameBoard:R},mounted:function(){window.onkeyup=function(e){x.handleEvent(e.code)},document.addEventListener("touchstart",n,!1),document.addEventListener("touchmove",o,!1);var e=null,r=null;function t(e){return e.touches||e.originalEvent.touches}function n(n){var o=t(n)[0];e=o.clientX,r=o.clientY}function o(t){if(e&&r){var n=t.touches[0].clientX,o=t.touches[0].clientY,a=e-n,i=r-o;Math.abs(a)>Math.abs(i)?a>0?x.handleEvent(v.ArrowLeft):x.handleEvent(v.ArrowRight):i>0?x.handleEvent(v.ArrowUp):x.handleEvent(v.ArrowDown),e=null,r=null}}},data:function(){return{game:x,rows:x.rows}}},C=E,k=(t("034f"),Object(S["a"])(C,o,a,!1,null,null,null)),P=k.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(P)}}).$mount("#app")},"85ec":function(e,r,t){},cb40:function(e,r,t){}});
//# sourceMappingURL=app.9eafd0f5.js.map