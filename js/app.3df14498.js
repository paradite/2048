(function(r){function e(e){for(var n,i,s=e[0],c=e[1],u=e[2],f=0,w=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&w.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(r[n]=c[n]);l&&l(e);while(w.length)w.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var r,e=0;e<a.length;e++){for(var t=a[e],n=!0,s=1;s<t.length;s++){var c=t[s];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),r=i(i.s=t[0]))}return r}var n={},o={app:0},a=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=n,i.d=function(r,e,t){i.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,e){if(1&e&&(r=i(r)),8&e)return r;if(4&e&&"object"===typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)i.d(t,n,function(e){return r[e]}.bind(null,n));return t},i.n=function(r){var e=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(e,"a",e),e},i.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},i.p="/vue2048/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([0,"chunk-vendors"]),t()})({0:function(r,e,t){r.exports=t("56d7")},"0134":function(r,e,t){"use strict";var n=t("2976"),o=t.n(n);o.a},"034f":function(r,e,t){"use strict";var n=t("85ec"),o=t.n(n);o.a},2023:function(r,e,t){"use strict";var n=t("cb40"),o=t.n(n);o.a},2976:function(r,e,t){},"56d7":function(r,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),o=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{attrs:{id:"app"}},[r._m(0),t("GameBoard",{attrs:{game:r.game}}),t("div",{staticClass:"buttons"},[t("div",{staticClass:"button button-primary"},[r._v("Magic")]),t("div",{staticClass:"button button-primary",on:{click:r.game.restart}},[r._v("Restart")])]),t("div",{staticClass:"info"},[r._v("Move count: "+r._s(r.game.moveCount))]),t("div",{staticClass:"scores"},[r._v(" Scores"),0===r.game.scores.length?t("span",[r._v(" (empty)")]):r._e(),r._l(r.game.scores,(function(e,n){return t("div",{key:n},[r._v(" "+r._s(e)+" ")])}))],2)],1)},a=[function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"header"},[r._v(" 2048 Game by "),t("a",{attrs:{href:"https://github.com/paradite/vue2048"}},[r._v("@paradite")])])}],i=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"board",style:{width:r.totalSize+"px",height:r.totalSize+"px",padding:r.marginSize+"px"}},r._l(r.game.rows,(function(e,n){return t("Row",{key:n,attrs:{row:e,cellSize:r.cellSize,marginSize:r.marginSize,totalSize:r.totalSize,last:n===r.game.rows.length-1}})})),1)},s=[],c=(t("99af"),t("3835")),u=t("d4ec"),l=t("ade3"),f=t("cd3f"),w=t.n(f),h=(t("b64b"),function(r){console.log("----");for(var e=0;e<r.length;e++){for(var t="",n=r[e],o=0;o<n.length;o++)n[o]?t+=n[o]+" ":t+=". ";console.log(t)}}),v={ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown"},d=2048,g=function r(){var e=this;Object(u["a"])(this,r),Object(l["a"])(this,"resetRows",(function(){e.rows=new Array(4);for(var r=0;r<e.rows.length;r++)e.rows[r]=new Array(4);e.addRandomNumbers()})),Object(l["a"])(this,"restart",(function(){e.moveCount=0,e.resetRows()})),Object(l["a"])(this,"isValidKey",(function(r){return r===v.ArrowUp||r===v.ArrowDown||r===v.ArrowLeft||r===v.ArrowRight})),Object(l["a"])(this,"checkWin",(function(){e.runForEachCell((function(r,t,n){n===d&&(e.scores.push(e.moveCount),e.restart())}))})),Object(l["a"])(this,"checkLose",(function(){var r=e.rows.length*e.rows[0].length,t=0;e.runForEachCell((function(r,e,n){n&&t++})),r===t&&(e.scores.push(0),e.restart())})),Object(l["a"])(this,"runForEachCell",(function(r){for(var t=0;t<e.rows.length;t++)for(var n=e.rows[t],o=0;o<n.length;o++){var a=n[o];r(t,o,a)}})),Object(l["a"])(this,"addRandomNumbers",(function(){for(var r=0;r<2;r++){var t=e.getRandomPosition(),n=e.getRandomPosition(),o=3;while(e.rows[t][n]&&o)t=e.getRandomPosition(),n=e.getRandomPosition(),o--;if(e.rows[t][n])return;var a=e.getRandomNumber();e.rows[t][n]=a}})),Object(l["a"])(this,"getRandomPosition",(function(){var r=Math.random();return r<.25?0:r<.5?1:r<.75?2:3})),Object(l["a"])(this,"getRandomNumber",(function(){return 2})),Object(l["a"])(this,"getMoveDestination",(function(r,t,n,o,a){switch(o){case v.ArrowUp:if(0===r)return[r,t];for(var i=r-1;i>=0;i--)if(a["".concat(i,"-").concat(t)]){if(e.rows[i][t])return[i+1,t]}else if(e.rows[i][t])return e.rows[i][t]!==n?[i+1,t]:[i,t];return[r,t];case v.ArrowDown:if(r===e.rows.length-1)return[r,t];for(var s=r+1;s<=e.rows.length-1;s++)if(a["".concat(s,"-").concat(t)]){if(e.rows[s][t])return[s-1,t]}else if(e.rows[s][t])return e.rows[s][t]!==n?[s-1,t]:[s,t];return[r,t];case v.ArrowLeft:if(0===t)return[r,t];for(var c=t-1;c>=0;c--)if(a["".concat(r,"-").concat(c)]){if(e.rows[r][c])return[r,c+1]}else if(e.rows[r][c])return e.rows[r][c]!==n?[r,c+1]:[r,c];return[r,t];case v.ArrowRight:if(t===e.rows[0].length-1)return[r,t];for(var u=t+1;u<=e.rows[0].length-1;u++)if(a["".concat(r,"-").concat(u)]){if(e.rows[r][u])return[r,u-1]}else if(e.rows[r][u])return e.rows[r][u]!==n?[r,u-1]:[r,u];return[r,t];default:break}})),Object(l["a"])(this,"handleEvent",(function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.isValidKey(r)){n&&e.moveCount++;for(var o=!1,a=0;a<e.rows.length;a++)for(var i=e.rows[a],s=0;s<i.length;s++)if(!t["".concat(a,"-").concat(s)]){var u=i[s];if(u){var l=e.getMoveDestination(a,s,u,r,t);if(l){var f=Object(c["a"])(l,2),v=f[0],d=f[1];if(v===a&&d===s)continue;t["".concat(v,"-").concat(d)]=!0,o=!0,i[s]=void 0,e.rows[v][d]?(u!==e.rows[v][d]&&console.error("element ".concat(u," from ").concat(a,",").concat(s," moved to ").concat(v,",").concat(d," with ").concat(e.rows[v][d])),e.rows[v][d]=u+e.rows[v][d]):e.rows[v][d]=u}}}o?e.handleEvent(r,t,!1):(e.squeeze(r),e.rows=w()(e.rows),e.checkWin(),e.checkLose(),e.addRandomNumbers(),h(e.rows),e.rows=w()(e.rows))}})),Object(l["a"])(this,"squeeze",(function(r){for(var t=!1,n=0;n<e.rows.length;n++)for(var o=e.rows[n],a=0;a<o.length;a++){var i=o[a];if(i){var s=e.getSqueezeDestination(n,a,r);if(s){var u=Object(c["a"])(s,2),l=u[0],f=u[1];if(l===n&&f===a)continue;t=!0,o[a]=void 0,e.rows[l][f]?(console.error("something wrong r c",l,f),console.error("this.rows[r][c]",e.rows[l][f])):e.rows[l][f]=i}}}t&&(e.rows=w()(e.rows),e.squeeze(r))})),Object(l["a"])(this,"getSqueezeDestination",(function(r,t,n){switch(n){case v.ArrowUp:if(0===r)return[r,t];for(var o=r-1;o>=0;o--)if(e.rows[o][t])return[o+1,t];return[0,t];case v.ArrowDown:if(r===e.rows.length-1)return[r,t];for(var a=r+1;a<=e.rows.length-1;a++)if(e.rows[a][t])return[a-1,t];return[e.rows.length-1,t];case v.ArrowLeft:if(0===t)return[r,t];for(var i=t-1;i>=0;i--)if(e.rows[r][i])return[r,i+1];return[r,0];case v.ArrowRight:if(t===e.rows[0].length-1)return[r,t];for(var s=t+1;s<=e.rows[0].length-1;s++)if(e.rows[r][s])return[r,s-1];return[r,e.rows[0].length-1];default:break}})),this.resetRows(),this.moved={},this.moveCount=0,this.scores=[]},p=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"row",style:{width:r.totalSize+"px",height:r.cellSize+"px",marginBottom:r.last?0:r.marginSize+"px"}},r._l(r.row,(function(e,n){var o;return t("div",{key:n,staticClass:"cell",class:(o={},o["cell-"+e]=!0,o),style:{width:r.cellSize+"px",height:r.cellSize+"px",marginRight:n===r.row.length-1?0:r.marginSize+"px"}},[r._v(" "+r._s(e)+" ")])})),0)},m=[],b=(t("a9e3"),{name:"Row",props:{row:Array,cellSize:Number,marginSize:Number,totalSize:Number,last:Boolean}}),y=b,S=(t("2023"),t("2877")),_=Object(S["a"])(y,p,m,!1,null,"952ee07a",null),O=_.exports,A={name:"GameBoard",components:{Row:O},data:function(){var r=70,e=10;return{cellSize:r,marginSize:e}},computed:{totalSize:function(){return 4*this.cellSize+3*this.marginSize}},props:{game:g,rows:Array}},j=A,z=(t("0134"),Object(S["a"])(j,i,s,!1,null,"2840321e",null)),R=z.exports,x=new g,C={name:"App",components:{GameBoard:R},mounted:function(){window.onkeyup=function(r){x.handleEvent(r.code)},document.addEventListener("touchstart",n,!1),document.addEventListener("touchmove",o,!1);var r=null,e=null;function t(r){return r.touches||r.originalEvent.touches}function n(n){var o=t(n)[0];r=o.clientX,e=o.clientY}function o(t){if(r&&e){var n=t.touches[0].clientX,o=t.touches[0].clientY,a=r-n,i=e-o;Math.abs(a)>Math.abs(i)?a>0?x.handleEvent(v.ArrowLeft):x.handleEvent(v.ArrowRight):i>0?x.handleEvent(v.ArrowUp):x.handleEvent(v.ArrowDown),r=null,e=null}}},data:function(){return{game:x,rows:x.rows}}},E=C,k=(t("034f"),Object(S["a"])(E,o,a,!1,null,null,null)),P=k.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(r){return r(P)}}).$mount("#app")},"85ec":function(r,e,t){},cb40:function(r,e,t){}});
//# sourceMappingURL=app.3df14498.js.map